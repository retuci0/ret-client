package me.retucio.retclient.features.modules.exploit;

import me.retucio.retclient.features.modules.Module;
import net.minecraft.item.Items;
import net.minecraft.network.packet.c2s.play.ClientCommandC2SPacket;
import net.minecraft.network.packet.c2s.play.PlayerMoveC2SPacket;

// there's a glitch the the arrow just gets autistic and goes everywhere except where you aim at
// so just use it in a more close range
// it deals like a quarter of a wither's health btw

public class InstantBowKill extends Module {
	
	public InstantBowKill() {
		super("InstantBowKill", "Modifies your velocity to make the next arrow you shoot very powerful", Category.EXPLOIT, true, false, false);
	}
	
	@Override
	public void onTick() {
        if (mc.player.getInventory().getMainHandStack().getItem().equals(Items.BOW)) {
        	if (mc.player.isUsingItem())
            doTheVelocityThing();
        }
	}
	
	public void doTheVelocityThing() {
		mc.player.networkHandler.sendPacket(new ClientCommandC2SPacket(mc.player, ClientCommandC2SPacket.Mode.START_SPRINTING));
		
		for (int i = 0; i < 100; i++) {
			mc.player.networkHandler.sendPacket(new PlayerMoveC2SPacket.PositionAndOnGround(mc.player.getX(), mc.player.getY() - 0.000000001, mc.player.getZ(), true));
			mc.player.networkHandler.sendPacket(new PlayerMoveC2SPacket.PositionAndOnGround(mc.player.getX(), mc.player.getY() + 0.000000001, mc.player.getZ(), false));
		}
	}
}